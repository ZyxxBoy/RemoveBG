{% extends "base.html" %}

{% block content %}
<main class="relative flex flex-col items-center justify-start px-4 py-12 sm:py-20 min-h-screen">

    <!-- ===== HERO ===== -->
    <section class="text-center mb-10 animate-fade-in">
        <!-- Logo -->
        <div class="flex justify-center mb-6">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="RBG Remove BG"
                class="h-24 sm:h-28 md:h-32 w-auto drop-shadow-2xl" />
        </div>
        <p class="mt-2 text-lg sm:text-xl text-slate-300/90 max-w-xl mx-auto">
            Remove image backgrounds instantly using AI.
        </p>
    </section>

    <!-- ===== UPLOAD CARD ===== -->
    <section id="upload-section" class="w-full max-w-2xl animate-fade-in-up">
        <div class="glass-card rounded-2xl p-8">
            <!-- Drop zone -->
            <div id="drop-zone"
                class="relative flex flex-col items-center justify-center border-2 border-dashed border-white/20 rounded-xl p-10 cursor-pointer transition-all duration-300 hover:border-brand-400/60 hover:bg-white/[0.03] group">
                <!-- Icon -->
                <svg class="w-14 h-14 text-slate-400 group-hover:text-brand-400 transition-colors duration-300 mb-4"
                    xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
                </svg>
                <p class="text-slate-300 font-medium text-base sm:text-lg">Drag & drop your image here</p>
                <p class="text-slate-500 text-sm mt-1">or click to browse</p>
                <p class="text-slate-500/70 text-xs mt-3">JPG, JPEG, PNG — max 5 MB</p>
                <input id="file-input" type="file" accept=".jpg,.jpeg,.png"
                    class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
            </div>

            <!-- Preview of selected image -->
            <div id="preview-wrapper" class="hidden mt-6">
                <p class="text-sm text-slate-400 mb-2 font-medium">Selected image:</p>
                <div class="relative rounded-xl overflow-hidden border border-white/10">
                    <img id="preview-img" class="w-full max-h-80 object-contain bg-black/20" alt="Preview" />
                </div>
                <button id="remove-btn"
                    class="mt-5 w-full py-3 px-6 rounded-xl font-semibold text-white bg-gradient-to-r from-brand-500 to-brand-700 shadow-lg shadow-brand-800/40 hover:shadow-brand-600/50 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 text-base">
                    ✨ Remove Background
                </button>
            </div>
        </div>
    </section>

    <!-- ===== LOADING OVERLAY ===== -->
    <section id="loading-section" class="hidden w-full max-w-2xl mt-8 animate-fade-in">
        <div class="glass-card rounded-2xl p-10 flex flex-col items-center">
            <div class="loader mb-4"></div>
            <p class="text-slate-300 font-medium text-lg">Processing your image…</p>
            <p class="text-slate-500 text-sm mt-1">This may take a few seconds</p>
        </div>
    </section>

    <!-- ===== RESULT ===== -->
    <section id="result-section" class="hidden w-full max-w-5xl mt-10 animate-fade-in-up">
        <h2 class="text-2xl font-bold text-white mb-6 text-center">Before &amp; After</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Original -->
            <div class="glass-card rounded-2xl p-4">
                <p class="text-sm text-slate-400 font-medium mb-3 text-center uppercase tracking-wider">Original</p>
                <div class="rounded-xl overflow-hidden border border-white/10 bg-black/20">
                    <img id="result-original" class="w-full max-h-96 object-contain" alt="Original" />
                </div>
            </div>
            <!-- Processed -->
            <div class="glass-card rounded-2xl p-4">
                <p class="text-sm text-slate-400 font-medium mb-3 text-center uppercase tracking-wider">Background
                    Removed</p>
                <div class="rounded-xl overflow-hidden border border-white/10 checkered-bg">
                    <img id="result-processed" class="w-full max-h-96 object-contain" alt="Processed" />
                </div>
            </div>
        </div>

        <!-- Download -->
        <div class="flex justify-center mt-8 gap-4">
            <a id="download-btn" href="#" download="removed_bg.png"
                class="inline-flex items-center gap-2 py-3 px-8 rounded-xl font-semibold text-white bg-gradient-to-r from-brand-500 to-brand-700 shadow-lg shadow-brand-800/40 hover:shadow-brand-600/50 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12M12 16.5V3" />
                </svg>
                Download PNG
            </a>
            <button id="new-upload-btn"
                class="inline-flex items-center gap-2 py-3 px-8 rounded-xl font-semibold text-white border border-white/20 hover:bg-white/10 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200">
                <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
                New Image
            </button>
        </div>
    </section>

    <!-- ===== ERROR TOAST ===== -->
    <div id="error-toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-50 hidden">
        <div
            class="bg-red-600/90 backdrop-blur text-white px-6 py-3 rounded-xl shadow-lg text-sm font-medium flex items-center gap-2">
            <svg class="w-5 h-5 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
            </svg>
            <span id="error-text"></span>
        </div>
    </div>

</main>
{% endblock %}